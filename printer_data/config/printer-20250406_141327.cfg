[include fluidd.cfg]
[include mainsail.cfg]
[include boards/BTT_Manta_M8P_v1.1.cfg]
[include boards/BTT_EBB36-42_v1.2.cfg]
[include macro/macro.cfg]
#[include SM2.cfg]
[include macro/SFS2.cfg]

#[include stealthburner_leds.cfg]
#[include macro/nozzle.cfg]

#[include motor_database.cfg] 

#[skew_correction]


[virtual_sdcard]                   
path: ~/printer_data/gcodes
on_error_gcode: CANCEL_PRINT
# [virtual_sdcard]
# path: /home/biqu/printer_data/gcodes
# on_error_gcode: CANCEL_PRINT

#####################################################################
## 	                MCU
#####################################################################


[mcu]
canbus_uuid: a08c4b73a1b1 # your UUID of Manta MCU

[mcu toolhead]
canbus_uuid: 3c517557f37a # your UUID of EBB MCU

#####################################################################
##                     cartographer V3 (ADXL 345)
#####################################################################

[scanner]
canbus_uuid: 1dfd2e9e1ae7
#    Fill in the UUID that was just recorded           
x_offset: 0                          
#    adjust for your cartographers offset from nozzle to middle of coil
y_offset: 21                         
#    adjust for your cartographers offset from nozzle to middle of coil
backlash_comp: 0.5
#   Backlash compensation distance for removing Z backlash before measuring
#   the sensor response.
# 
#   Offsets are measured from the centre of your coil, to the tip of your nozzle 
#   on a level axis. It is vital that this is accurate. 
calibration_method: touch
#    leave this as touch unless you want to use scan only for everything. 
sensor: cartographer
#    this must be set as cartographer unless using IDM etc.
sensor_alt: carto
#    alternate name to call commands. CARTO_TOUCH etc
#scanner_touch_z_offset: 0.05         
#    This is the default and will be overwritten and added to the DO NOT SAVE area by using UI to save z offset
mesh_runs: 2
#    Number of passes to make during mesh scan.

[gcode_macro BED_MESH_CALIBRATE]
rename_existing: _BED_MESH_CALIBRATE
gcode:
    {% set TARGET_TEMP = printer.heater_bed.target %}
    M140 S0
    _BED_MESH_CALIBRATE {rawparams}
    M140 S{TARGET_TEMP}
    
# [adxl345]
# cs_pin: scanner:PA3
# spi_bus: spi1

# [resonance_tester]
# accel_chip: adxl345             # Specifies ADXL345 accelerometer for resonance testing
# probe_points:
#     90, 90, 20                # Coordinates of the probe points for resonance testing
# [safe_z_home]
# home_xy_position: 150,150                # Example home_xy_position: 175,175 - This would be for a 350 * 350mm bed. 
# z_hop: 10                                # Z axis hop height after homing.

#####################################################################
##                     Model and acceleration
#####################################################################
[printer]
kinematics: corexy           # Printer type：corexy
max_velocity: 300            # Maximum speed (max. 300)
max_accel: 4000              # Maximum acceleration (max. 4000)
#max_accel_to_decel: 4000     # Maximum acceleration to deceleration (max. 4000)
max_z_velocity: 15           # Z-axis maximum speed
max_z_accel: 350             # Z-axis maximum acceleration
square_corner_velocity: 5.0  # Square corner speed

# [printer]
# kinematics: corexy
# max_velocity: 300  
# max_accel: 3000
# max_z_velocity: 15
# max_z_accel: 350
# square_corner_velocity: 14


[input_shaper]
shaper_freq_x: 55.4 # center frequency for the X axis filter
shaper_type_x: mzv # filter type for the X axis
shaper_freq_y: 45.8 # center frequency for the Y axis filter
shaper_type_y: mzv # filter type for the Y axis
damping_ratio_x: 0.090 # damping ratio for the X axis
damping_ratio_y: 0.066 # damping ratio for the Y axis

[resonance_tester]
probe_points: 90, 90, 20
accel_chip: adxl345

# [adxl345] # replace "adxl345" by your correct accelerometer name
# axes_map: -z,y,x


[gcode_arcs]
resolution: 1.0

[exclude_object]
#####################################################################
#   MISC
#####################################################################

[adxl345]
cs_pin: toolhead: PB12
spi_software_sclk_pin: toolhead: PB10
spi_software_mosi_pin: toolhead: PB11
spi_software_miso_pin: toolhead: PB2
axes_map: x,y,z

[temperature_sensor MANTA]
sensor_type: temperature_mcu

[temperature_sensor CB1]
sensor_type: temperature_host

[temperature_sensor chamber]
max_temp: 100
min_temp: 0
#MINIMUM=30
sensor_pin: PA2
sensor_type: Generic 3950
gcode_id: chamber_th

[temperature_sensor Cartographer_MCU]
sensor_type: temperature_mcu
sensor_mcu: scanner
min_temp: 0
max_temp: 105
#-------------------------#
#   EXTRUDER/BED PIDs     #
#-------------------------#

## Here is an example of some overrides for the PIDs. I put them here as almost everyone will use them,
## so just uncomment the following lines and change the values according to your own machine

[extruder]
step_pin: toolhead: PD0
dir_pin: toolhead: PD1
enable_pin: !toolhead: PD2
rotation_distance: 47.995
gear_ratio: 9:1
microsteps: 16
# rotation_distance: 20.187  # Suggested to tune yourself
# gear_ratio: 50:10
# microsteps: 32
full_steps_per_rotation: 200
nozzle_diameter: 0.400
filament_diameter: 1.75
heater_pin: toolhead: PB13
sensor_type: Generic 3950
sensor_pin: toolhead: PA3
min_temp: 10
max_temp: 290
max_power: 1.0
min_extrude_temp: 100
max_extrude_cross_section: 5
max_extrude_only_distance: 500
#control = pid      # Suggested to tune yourself
#pid_kp: 33.032
#pid_ki: 4.004
#pid_kd: 68.129
pressure_advance: 0.035     # Suggested to tune yourself
pressure_advance_smooth_time: 0.040




##  E0 on EBB can
[tmc2209 extruder]
uart_pin: toolhead: PA15
interpolate: false
run_current: 0.6
#run_current: 0.30
stealthchop_threshold: 200


#####################################################################
#                            Hot bed configuration
#####################################################################

[heater_bed]
heater_pin: PB5
sensor_type: EPCOS 100K B57560G104F
sensor_pin: PA1
smooth_time: 3.0
max_power: 1.0   # Only needed for 100w pads
min_temp: -100
max_temp: 110
# control: pid                       # PID hot bed temperature automatic calibration item (commented by default
#pid_kp: 58.437                     # PID hot bed temperature automatic calibration item (commented by default)
#pid_ki: 2.347                      # PID hot bed temperature automatic calibration item (commented by default)
#pid_kd: 363.769                    # PID hot bed temperature automatic calibration item (commented by default)

#####################################################################
#   B(X) ---------A(Y)
#   |                |
#   |--------E-------|
#   |                |
#   |                |
#   |                |
#####################################################################
##                   X-axis on MOTOR_0(B Motor)
#####################################################################

##  B Stepper - Left
##  Connected to MOTOR_1
[stepper_x]
step_pin: PE2
dir_pin: PB4
enable_pin: !PC11
rotation_distance: 32
microsteps: 32
full_steps_per_rotation:200  
position_min: 0
##--------------------------------------------------------------------

position_endstop: 180
position_max: 180
homing_positive_dir: true
endstop_pin: tmc2209_stepper_x:virtual_endstop
homing_speed: 50                                                    # for sensorless homing it is recommended not to go above 40mm/s   
homing_retract_dist: 0
step_pulse_duration: 0.000004
# endstop_pin: toolhead:PB6
#homing_retract_dist: 3
 

# Motor1
[tmc2209 stepper_x]
uart_pin: PC10
diag_pin: ^PF3
interpolate: false
run_current: 0.57
sense_resistor: 0.110
driver_SGTHRS: 130
stealthchop_threshold: 0

#####################################################################
##                   Y-axis on MOTOR_1(A Motor)
########################################################################

##  A Stepper - Right
##  Connected to MOTOR_2
[stepper_y]
step_pin: PF12
dir_pin: PF11
enable_pin: !PB3
rotation_distance: 32
microsteps: 32
full_steps_per_rotation:200 
position_min: 0
##--------------------------------------------------------------------


position_endstop: 180
position_max: 180
homing_positive_dir: true
endstop_pin: tmc2209_stepper_y:virtual_endstop
homing_speed: 50                                                    # for sensorless homing it is recommended not to go above 40mm/s   
homing_retract_dist: 0

# endstop_pin: ^PF4
#homing_retract_dist: 3


# Motor2
[tmc2209 stepper_y]
uart_pin: PF13
diag_pin: ^PF4
interpolate: false
run_current: 0.85
sense_resistor: 0.110
driver_SGTHRS: 130	
stealthchop_threshold: 0
#####################################################################
#   z1 -------------- z2
#   |                 |
#   |                 |
#   |                 |
#   |                 |
#  z0---   display ---z3
#####################################################################
##                  Z0-axis
#####################################################################
## Z0 Stepper - Front Left
##  Connected to MOTOR_4
[stepper_z]
step_pin: PD3
dir_pin: PD2
enable_pin: !PD5
rotation_distance: 32
gear_ratio: 64:16
microsteps: 16
endstop_pin: probe:z_virtual_endstop
##--------------------------------------------------------------------

position_max: 165
position_min: -5
homing_speed: 8
second_homing_speed: 3
homing_retract_dist: 3

# Motor3
[tmc2209 stepper_z]
uart_pin: PD4
interpolate: false
run_current: 0.85
stealthchop_threshold: 200
# stealthchop_threshold: 999999

#####################################################################

##  Z1 Stepper - Rear Left
##  Connected to MOTOR_5
[stepper_z1]
step_pin: PC9
dir_pin: !PC8
enable_pin: !PD1
rotation_distance: 32
gear_ratio: 64:16
microsteps: 16

[tmc2209 stepper_z1]
uart_pin: PD0
interpolate: false
run_current: 0.85
stealthchop_threshold: 200
# stealthchop_threshold: 999999

#####################################################################

##  Z2 Stepper - Rear Right
##  Connected to MOTOR_6
[stepper_z2]
step_pin: PA10
dir_pin: PA14
enable_pin: !PA15 
rotation_distance: 32
gear_ratio: 64:16
microsteps: 16

[tmc2209 stepper_z2]
uart_pin: PF8
interpolate: false
run_current: 0.85
stealthchop_threshold: 200
# stealthchop_threshold: 999999

#####################################################################

##  Z3 Stepper - Front Right
##  Connected to MOTOR_7
[stepper_z3]
step_pin: PD11
dir_pin: !PD9
enable_pin: !PD15 
rotation_distance: 32
gear_ratio: 64:16
microsteps: 16

[tmc2209 stepper_z3]
uart_pin: PD14
interpolate: false
run_current: 0.85
stealthchop_threshold: 200
# stealthchop_threshold: 999999

[autotune_tmc stepper_x]
motor: moons-ms14hs5p4150
[autotune_tmc stepper_y]
motor: moons-ms14hs5p4150

# [autotune_tmc stepper_z]
# motor: ldo-42sth48-2004ac
# [autotune_tmc stepper_z1]
# motor: ldo-42sth48-2004ac
# [autotune_tmc stepper_z2]
# motor: ldo-42sth48-2004ac
# [autotune_tmc stepper_z3]
# motor: ldo-42sth48-2004ac

[autotune_tmc extruder]
motor: ldo-42sth40-1684ac

#-------------------------#
#   Probe Offsets         #
#-------------------------#

## Here is an example of some overrides for bed probes. These frequently have calibrated offsets for xyz,
## and many will need them during setup. If you need to set these, just uncomment the following lines.
# [probe]
# x_offset: 0
# y_offset: 0
# #z_offset: 0
# pin: toolhead: PB6
# speed: 10.0 
# lift_speed: 7                         # Leveling speed
# samples: 3                         # Sampling times
# samples_result: median              # Value method (default median-median)
# #samples_result: average
# sample_retract_dist: 3.0            # Leveling retraction distance
# samples_tolerance: 0.04            # Sampling tolerance (note that too small a value may cause an increase in the number of sampling times)
# samples_tolerance_retries: 5        # Number of out-of-tolerance retries

# #TAP settings;
# activate_gcode:
#     {% set PROBE_TEMP = 150 %}
#     {% set MAX_TEMP = PROBE_TEMP + 5 %}
#     {% set ACTUAL_TEMP = printer.extruder.temperature %}
#     {% set TARGET_TEMP = printer.extruder.target %}

#     {% if TARGET_TEMP > PROBE_TEMP %}
#         { action_respond_info('Extruder temperature target of %.1fC is too high, lowering to %.1fC' % (TARGET_TEMP, PROBE_TEMP)) }
#         M109 S{ PROBE_TEMP }
#     {% else %}
#         # Temperature target is already low enough, but nozzle may still be too hot.
#         {% if ACTUAL_TEMP > MAX_TEMP %}
#             { action_respond_info('Extruder temperature %.1fC is still too high, waiting until below %.1fC' % (ACTUAL_TEMP, MAX_TEMP)) }
#             TEMPERATURE_WAIT SENSOR=extruder MAXIMUM={ MAX_TEMP }
#         {% endif %}
#     {% endif %}

#####################################################################
#                          Idle off hot bed
#####################################################################
[idle_timeout]
timeout: 1800

#####################################################################
#                        Homing and Gantry Adjustment
#####################################################################
[quad_gantry_level]
#  Gantry Corners
gantry_corners:
   -60.2,-10.4
   244.1,234.5
#  Probe points
points:
   10,10
   10,150
   170,150
   170,10
speed: 300
horizontal_move_z: 10
retries: 5
retry_tolerance: 0.015
max_adjust: 10

# [safe_z_home]
# ##  XY Location of the Z Endstop Switch
# home_xy_position: 170, 170
# speed: 400
# z_hop:6

#####################################################################
# 	                   Bed Grid Calibration
#####################################################################

[bed_mesh]
zero_reference_position: 90, 90
speed: 300
horizontal_move_z: 5
mesh_min: 25, 25
mesh_max: 170, 170
# probe_count: 5,5 # Values should be odd, so one point is directly at bed center
probe_count: 30, 30
#]mesh_pps: 2,2
algorithm: bicubic
bicubic_tension: 0.2
#fade_start: 0.6
#fade_end: 10.0

# algorithm: bicubic
##--------------------------------------------------------------------
  
[gcode_macro _HOME_X]
gcode:
    # Always use consistent run_current on A/B steppers during sensorless homing
    {% set RUN_CURRENT_X = printer.configfile.settings['tmc2209 stepper_x'].run_current|float %}
    {% set RUN_CURRENT_Y = printer.configfile.settings['tmc2209 stepper_y'].run_current|float %}
    {% set HOME_CURRENT = 0.6 %}
    SET_TMC_CURRENT STEPPER=stepper_x CURRENT={HOME_CURRENT}
    SET_TMC_CURRENT STEPPER=stepper_y CURRENT={HOME_CURRENT}

    # Home
    G28 X
    # Move away
    G91
    G1 X-10 F1200
    
    # Wait just a second… (give StallGuard registers time to clear)
    G4 P1000
    G90
    # Set current during print
    SET_TMC_CURRENT STEPPER=stepper_x CURRENT={RUN_CURRENT_X}
    SET_TMC_CURRENT STEPPER=stepper_y CURRENT={RUN_CURRENT_Y}

[gcode_macro _HOME_Y]
gcode:
    # Set current for sensorless homing
    {% set RUN_CURRENT_X = printer.configfile.settings['tmc2209 stepper_x'].run_current|float %}
    {% set RUN_CURRENT_Y = printer.configfile.settings['tmc2209 stepper_y'].run_current|float %}
    {% set HOME_CURRENT = 0.6 %}
    SET_TMC_CURRENT STEPPER=stepper_x CURRENT={HOME_CURRENT}
    SET_TMC_CURRENT STEPPER=stepper_y CURRENT={HOME_CURRENT}

    # Home
    G28 Y
    # Move away
    G91
    G1 Y-10 F1200

    # Wait just a second… (give StallGuard registers time to clear)
    G4 P1000
    G90
    # Set current during print
    SET_TMC_CURRENT STEPPER=stepper_x CURRENT={RUN_CURRENT_X}
    SET_TMC_CURRENT STEPPER=stepper_y CURRENT={RUN_CURRENT_Y}


[gcode_macro _HOME_Z]
gcode:
    G90
    G28 Z
    G1 Z30  

[homing_override]
axes: z
set_position_z: 0
gcode:
   G90
   G0 Z5 F600
   G28 X Y
   ##   XY Location of the Z Endstop Switch
   ##   Update X and Y to your values (such as X157, Y305) after going through
   ##   Z Endstop Pin Location Definition step.
   G0 X90 Y90 F6600 
   
   G28 Z
   G0 Z10 F3600
   G0 x90 Y90 F6600
# [homing_override]
# axes: xyz
# gcode:
#   {% set home_all = 'X' not in params and 'Y' not in params and 'Z' not in params %}

#   {% if home_all or 'X' in params %}
#     _HOME_X
#   {% endif %}
  
#   {% if home_all or 'Y' in params %}
#     _HOME_Y
#   {% endif %}
  
#   {% if home_all or 'Z' in params %}
#     G28 Z
#     G1 Z10
#   {% endif %} 
#####################################################################
#                  FAN
#####################################################################
[fan]
##  Print Cooling Fan - FAN0
pin: toolhead: PA0
kick_start_time: 0.5
off_below: 0.10

[heater_fan hotend_fan]
pin: toolhead: PA1
heater: extruder
heater_temp: 50.0

#[fan_generic 4W_FAN0]
#pin: EBBCan:gpio15
#tachometer_pin: EBBCan:gpio12
#tachometer_ppr: 1

# [heater_fan Nevermore]
# pin: PE5
# max_power: 1.0
# shutdown_speed: 1.0
# kick_start_time: 5.0
# heater: extruder
# heater_temp: 200
# fan_speed: 1.0

#--------------------------------------------------------------------
[heater_fan controller_fan]  # Skirt fan 1
pin: PE6                    # FAN-0
shutdown_speed: 0.0          # Closing speed (Please do not change)
kick_start_time: 0.5         # start-up time (Please do not change)
heater: heater_bed           # Related equipment: heater_bed
heater_temp: 50              # How many degrees does the heat bed reach to activate the fan
fan_speed: 0.6               # Fan speed
#--------------------------------------------------------------------
[heater_fan controller_fan2] # Skirt fan 2
pin: PE0                    # FAN-1
shutdown_speed: 0.0          # Closing speed (Please do not change)
kick_start_time: 0.5         # start-up time (Please do not change)
heater: heater_bed           # Related equipment: heater_bed
heater_temp: 50              # How many degrees does the heat bed reach to activate the fan
fan_speed: 0.6               # Fan speed
#--------------------------------------------------------------------
[heater_fan exhaust_fan]     # Skirt fan 3
pin: PC12                     # FAN-2
shutdown_speed: 0.0          # Closing speed (Please do not change)
kick_start_time: 5.0         # start-up time (Please do not change)
heater: heater_bed           # Related equipment: heater_bed
heater_temp: 60              # How many degrees does the heat bed reach to activate the fan
fan_speed: 1.0               # Fan speed
#--------------------------------------------------------------------
#[heater_fan hotend_fan]      # Hotend Fan
#pin: PD14                     # FAN-0
#max_power: 1.0               # Maximum speed
#kick_start_time: 0.5         # start-up time (Please do not change)
#heater: extruder             # Related equipment: extruder
#heater_temp: 50              # How many degrees does it reach to activate the fan
#fan_speed: 1.0               # Fan speed

#####################################################################
#	                         LED control
#####################################################################
# [include stealthburner_leds.cfg]

[neopixel my_neopixel]              # Enter English square brackets to enable this definition
pin: PB15                            # Motherboard pin definition
chain_count:20                      # 
color_order: GRBW
#hardware_pwm: False                   # color order
initial_RED: 0.2                    # The default value of the red light when turned on is 1
initial_GREEN: 0.2                  # The maximum default value of the green light when turned on is 1
initial_BLUE: 0.2                   # The default value of the blue light when turned on is 1

# [neopixel Tool_head]              # Enter English square brackets to enable this definition
# pin: toolhead:PD3                             # Motherboard pin definition
# chain_count:9                      # 
# color_order: GRBW                   # color order
# initial_RED: 0.2                    # The default value of the red light when turned on is 1
# initial_GREEN: 0.2                  # The maximum default value of the green light when turned on is 1
# initial_BLUE: 0.2   
                # The default value of the blue light when turned on is 1
# [output_pin daylight]
# pin: PA9 
# pwm: True
# cycle_time: 0.01


#####################################################################
#   A better print_start macro for v2/trident
#####################################################################

## *** THINGS TO UNCOMMENT: ***
## Bed mesh (2 lines at 2 locations)
## Nevermore (if you have one)
## Z_TILT_ADJUST (For Trident only)
## QUAD_GANTRY_LEVEL (For V2.4 only)
## Beacon Contact logic (if you have one. 4 lines at 4 locations)

[gcode_macro PRINT_START]
gcode:
  # This part fetches data from your slicer. Such as bed, extruder, and chamber temps and size of your printer.
  {% set target_bed = params.BED|int %}
  {% set target_extruder = params.EXTRUDER|int %}
  # {% set target_chamber = params.CHAMBER|default("45")|int %}
  {% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
  {% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}

  ##  Uncomment for Beacon Contact (1 of 4 for beacon contact)
  SET_GCODE_OFFSET Z=0                                 # Set offset to 0

  # Home the printer, set absolute positioning and update the Stealthburner LEDs.
  STATUS_HOMING                                         # Set LEDs to homing-mode
  G28                                                   # Full home (XYZ)
  G90                                                   # Absolute position

  ##  Uncomment for bed mesh (1 of 2 for bed mesh)
  BED_MESH_CLEAR                                       # Clear old saved bed mesh (if any)

  # Check if the bed temp is higher than 90c - if so then trigger a heatsoak.
  {% if params.BED|int > 90 %}
    SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"           # Display info on display
    STATUS_HEATING                                      # Set LEDs to heating-mode
    M106 S255                                           # Turn on the PT-fan

    ##  Uncomment if you have a Nevermore.
    #SET_PIN PIN=nevermore VALUE=1                      # Turn on the nevermore

    G1 X{x_wait} Y{y_wait} Z15 F9000                    # Go to center of the bed
    M190 S{target_bed}                                  # Set the target temp for the bed
    SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"  # Display info on display
    TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}   # Waits for chamber temp

  # If the bed temp is not over 90c, then skip the heatsoak and just heat up to set temp with a 5 min soak
  {% else %}
    SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"           # Display info on display
    STATUS_HEATING                                      # Set LEDs to heating-mode
    G1 X{x_wait} Y{y_wait} Z15 F9000                    # Go to center of the bed
    M190 S{target_bed}                                  # Set the target temp for the bed
    SET_DISPLAY_TEXT MSG="Soak for 5 min"               # Display info on display
    G4 P300000                                          # Wait 5 min for the bedtemp to stabilize
  {% endif %}

  # Heat hotend to 150c. This helps with getting a correct Z-home.
  SET_DISPLAY_TEXT MSG="Hotend: 150c"                   # Display info on display
  M109 S150                                             # Heat hotend to 150c

  ##  Uncomment for Beacon contact (2 of 4 for beacon contact)
  G28 Z METHOD=CONTACT CALIBRATE=1                     # Calibrate z offset and beacon model

  ##  Uncomment for Trident (Z_TILT_ADJUST)
  #SET_DISPLAY_TEXT MSG="Leveling"                      # Display info on display
  #STATUS_LEVELING                                      # Set LEDs to leveling-mode
  #Z_TILT_ADJUST                                        # Level the printer via Z_TILT_ADJUST
  #G28 Z                                                # Home Z again after Z_TILT_ADJUST

  ##  Uncomment for V2.4 (Quad gantry level AKA QGL)
  SET_DISPLAY_TEXT MSG="Leveling"                      # Display info on display
  STATUS_LEVELING                                      # Set LEDs to leveling-mode
  QUAD_GANTRY_LEVEL                                    # Level the printer via QGL
  G28 Z                                                # Home Z again after QGL

  ##  Uncomment for bed mesh (2 of 2 for bed mesh)
  SET_DISPLAY_TEXT MSG="Bed mesh"                      # Display info on display
  STATUS_MESHING                                       # Set LEDs to bed mesh-mode
  BED_MESH_CALIBRATE                                   # Start the bed mesh (add ADAPTIVE=1) for adaptive bed mesh

  ## Uncomment for Beacon Contact (3 of 4 for beacon contact)
  G28 Z METHOD=CONTACT CALIBRATE=0                     # Calibrate z offset only with hot nozzle

  # Heat up the hotend up to target via data from slicer
  SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"     # Display info on display
  STATUS_HEATING                                        # Set LEDs to heating-mode
  G1 X{x_wait} Y{y_wait} Z15 F9000                      # Go to center of the bed
  M107                                                  # Turn off partcooling fan
  M109 S{target_extruder}                               # Heat the hotend to set temp

  ##   Uncomment for Beacon Contact (4 of 4 for beacon contact)
  SET_GCODE_OFFSET Z=0.06                              # Add a little offset for hotend thermal expansion

  # Get ready to print by doing a primeline and updating the LEDs
  SET_DISPLAY_TEXT MSG="Printer goes brr"               # Display info on display
  STATUS_PRINTING                                       # Set LEDs to printing-mode
  G0 X{x_wait - 50} Y4 F10000                           # Go to starting point
  G0 Z0.4                                               # Raise Z to 0.4
  G91                                                   # Incremental positioning 
  G1 X100 E20 F1000                                     # Primeline
  G90                                                   # Absolute position

# #####################################################################
# #   print_start macro
# #####################################################################

# ## *** THINGS TO UNCOMMENT: ***
# ## Bed mesh (2 lines at 2 locations)
# ## Z_TILT_ADJUST if your printer is a Trident
# ## Quad gantry level if your printer is a V2
# ## Nevermore - if you have one


# [gcode_macro PRINT_START]
# gcode:
#   # This part fetches data from your slicer. Such as bed temp, extruder temp, chamber temp and size of your printer.
#   {% set target_bed = params.BED|int %}
#   {% set target_extruder = params.EXTRUDER|int %}
#   {% set target_chamber = params.CHAMBER|default("30")|int %}
#   {% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
#   {% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}
  
#   #SKEW_PROFILE LOAD=CaliFlower

#   # Homes the printer, sets absolute positioning and updates the Stealthburner leds.
#   STATUS_HOMING         # Sets SB-leds to homing-mode
#   G28                   # Full home (XYZ)
#   G90                   # Absolut position

#   ##  Uncomment for bed mesh (1 of 2)
#   BED_MESH_CLEAR       # Clears old saved bed mesh (if any)

#   # Checks if the bed temp is higher than 90c - if so then trigger a heatsoak.
#   {% if params.BED|int > 90 %}
#     SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"           # Displays info
#     STATUS_HEATING                                      # Sets SB-leds to heating-mode
#     M106 S255                                           # Turns on the PT-fan

#     ##  Uncomment if you have a Nevermore.
#     #SET_PIN PIN=nevermore VALUE=1                      # Turns on the nevermore

#   NEVERMORE_PRINT_START

#     G1 X{x_wait} Y{y_wait} Z15 F9000                    # Goes to center of the bed
#     M190 S{target_bed}                                  # Sets the target temp for the bed
#     SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"  # Displays info
#     TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}   # Waits for chamber to reach desired temp

#   # If the bed temp is not over 90c, then it skips the heatsoak and just heats up to set temp with a 5min soak
#   {% else %}
#     SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"           # Displays info
#     STATUS_HEATING                                      # Sets SB-leds to heating-mode
#     G1 X{x_wait} Y{y_wait} Z15 F9000                    # Goes to center of the bed
#     M190 S{target_bed}                                  # Sets the target temp for the bed
#     SET_DISPLAY_TEXT MSG="Soak for 5min"                # Displays info
#     G4 P300000                                          # Waits 5 min for the bedtemp to stabilize
#   {% endif %}

#   # Heating nozzle to 150 degrees. This helps with getting a correct Z-home
#   SET_DISPLAY_TEXT MSG="Hotend: 150c"          # Displays info
#   M109 S150                                    # Heats the nozzle to 150c

#   #  Uncomment for V2 (Quad gantry level AKA QGL)
#   SET_DISPLAY_TEXT MSG="QGL"      # Displays info
#   STATUS_LEVELING                 # Sets SB-leds to leveling-mode
#   quad_gantry_level               # Levels the buildplate via QGL
#   G28 Z                           # Homes Z again after QGL


#   ##  Uncomment for Klicky auto-z
#   #CALIBRATE_Z                                 # Calibrates Z-offset with klicky
#   #SET_DISPLAY_TEXT MSG="Z-offset"             # Displays info

#   ##  Uncomment for bed mesh (2 of 2)
#   SET_DISPLAY_TEXT MSG="Bed mesh"    # Displays info
#   STATUS_MESHING                     # Sets SB-leds to bed mesh-mode
#   bed_mesh_calibrate                 # Starts bed mesh

#   # Heats up the nozzle up to target via data from slicer
#   SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"             # Displays info
#   STATUS_HEATING                                                # Sets SB-leds to heating-mode
#   G1 X{x_wait} Y{y_wait} Z15 F9000                              # Goes to center of the bed
#   M107                                                          # Turns off partcooling fan
#   M109 S{target_extruder}                                       # Heats the nozzle to printing temp

#   # Gets ready to print by doing a purge line and updating the SB-leds
#   SET_DISPLAY_TEXT MSG="Printer goes brr"          # Displays info
#   STATUS_PRINTING                                  # Sets SB-leds to printing-mode
#   G0 X{x_wait - 50} Y4 F10000                      # Moves to starting point
#   G0 Z0.4                                          # Raises Z to 0.4
#   G91                                              # Incremental positioning 
#   G1 X95 E20 F1000                                 # Purge line
#   G90                                              # Absolut position
#   #Voron_Purge


[gcode_macro PRINT_END]
#   Use PRINT_END for the slicer ending script - please customize for your slicer of choice
description: PRINT_END
gcode:
    M400                           ; wait for buffer to clear
    G92 E0                         ; zero the extruder
    G1 E-4.0 F3600                 ; retract filament
    G91                            ; relative positioning

    #   Get Boundaries
    {% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
    {% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
    {% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}

    #   Check end position to determine safe direction to move
    {% if printer.toolhead.position.x < (max_x - 20) %}
        {% set x_safe = 20.0 %}
    {% else %}
        {% set x_safe = -20.0 %}
    {% endif %}

    {% if printer.toolhead.position.y < (max_y - 20) %}
        {% set y_safe = 20.0 %}
    {% else %}
        {% set y_safe = -20.0 %}
    {% endif %}

    {% if printer.toolhead.position.z < (max_z - 2) %}
        {% set z_safe = 2.0 %}
    {% else %}
        {% set z_safe = max_z - printer.toolhead.position.z %}
    {% endif %}

    G0 Z{z_safe} F3600             ; move nozzle up
    G0 X{x_safe} Y{y_safe} F20000  ; move nozzle to remove stringing
    TURN_OFF_HEATERS
    #NEVERMORE_PRINT_END
    M107                           ; turn off fan
    G90                            ; absolute positioning
    G0 X60 Y{max_y} F3600          ; park nozzle at rear
    #SET_SKEW CLEAR=1

[gcode_macro CANCEL_PRINT]
description: Cancel the actual running print
rename_existing: CANCEL_PRINT_BASE
variable_park: True
gcode:
  ## Move head and retract only if not already in the pause state and park set to true
  {% if printer.pause_resume.is_paused|lower == 'false' and park|lower == 'true'%}
    _TOOLHEAD_PARK_PAUSE_CANCEL
  {% endif %}
  TURN_OFF_HEATERS
  CANCEL_PRINT_BASE

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description: Helper: park toolhead used in PAUSE and CANCEL_PRINT
variable_extrude: 1.0
gcode:
  ##### set park positon for x and y #####
  # default is your max posion from your printer.cfg
  {% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
  {% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
  {% set z_park_delta = 2.0 %}
  ##### calculate save lift position #####
  {% set max_z = printer.toolhead.axis_maximum.z|float %}
  {% set act_z = printer.toolhead.position.z|float %}
  {% if act_z < (max_z - z_park_delta) %}
    {% set z_safe = z_park_delta %}
  {% else %}
    {% set z_safe = max_z - act_z %}
  {% endif %}
  ##### end of definitions #####
  {% if printer.extruder.can_extrude|lower == 'true' %}
    M83
    G1 E-{extrude} F2100
    {% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
  {% else %}
    {action_respond_info("Extruder not hot enough")}
  {% endif %}
  {% if "xyz" in printer.toolhead.homed_axes %}
    G91
    G1 Z{z_safe} F900
    G90
    G1 X{x_park} Y{y_park} F6000
    {% if printer.gcode_move.absolute_coordinates|lower == 'false' %} G91 {% endif %}
  {% else %}
    {action_respond_info("Printer not homed")}
  {% endif %}

# [gcode_macro CANCEL_PRINT]
# rename_existing: BASE_CANCEL_PRINT
# gcode:
#     TURN_OFF_HEATERS
#     CLEAR_PAUSE
#     SDCARD_RESET_FILE
# 	BASE_CANCEL_PRINT
#####################################################################
#                  KAMP
#####################################################################
# This file contains all settings for KAMP, and must be included in printer.cfg with:

#include KAMP_Settings.cfg]

### The following [includes] can be uncommented from within KAMP_Settings.cfg. ###

# This file enables the use of adaptive meshing.

#[include ./KAMP/Adaptive_Meshing.cfg]

# This file enables the use of adaptive line purging.

#[include ./KAMP/Line_Purge.cfg]

# This file enables the use of the adaptive Voron logo purge.

#[include ./KAMP/Voron_Purge.cfg]

# This file enables the use of KAMP's Smart Park feature.

#[include ./KAMP/Smart_Park.cfg]

    
#[shaketune]
#    The folder where the results will be stored. It will be created if it doesn't exist.
#    The number of results to keep in the result_folder. The oldest results will
#    be automatically deleted after each runs.
#    If True, the raw CSV files will be kept in the result_folder alongside the
#    PNG graphs. If False, they will be deleted and only the graphs will be kept.
#    Mainsail and Fluidd doesn't create buttons for "system" macros that are not in the
#    printer.cfg file. If you want to see the macros in the webui, set this to True.
#    The maximum time in seconds to let Shake&Tune process the CSV files and generate the graphs.

# [nevermore]
# # Can omit if you have only one nevermore in range.
# # See <<Finding The BT Address>> for more info.
# # NOTE: Providing an address will make startup slightly faster.
# #       (If no address is provided then the system must spend extra time
# #        verifying that there's only one nearby Nevermore.)
# # example - `bt_address: 43:43:A2:12:1F:AC`
# bt_address: 28:CD:C1:11:C4:08

# connection_initial_timeout: 0
# [nevermore]
# # BOM specifies a 16 pixel ring.
# # If you don't have LEDs, you can omit the two `led_*` lines entirely
# #ed_colour_order: GBR
# #led_chain_count: 16
# # These `fan_power_*` entries are for a DELTA BFB0712HF (StealthMax BOM)
# # If you have a different fan then play with these numbers to your satisfaction.
# # See full config documentation for details.
# fan_power_coefficient: 0.7  # lower max power to keep things much more quiet

# Optional
# This 'temperature' sensor only serves to draw the intake VOC index on

# Mainsail's temperature plot.
# [temperature_sensor nevermore_intake_VOC]
# sensor_type: NevermoreSensor
# sensor_kind: intake
# plot_voc: true

# #Uncomment the following if you're using Fluidd as your main UI.
# [temperature_sensor nevermore_intake]
# sensor_type: NevermoreSensor
# sensor_kind: intake
# [temperature_sensor nevermore_exhaust]
# sensor_type: NevermoreSensor
# sensor_kind: exhaust
# plot_voc: true

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 54.236
#*# pid_ki = 1.987
#*# pid_kd = 370.159
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 27.940
#*# pid_ki = 3.212
#*# pid_kd = 60.770
#*#
#*# [input_shaper]
#*#
#*# [probe]
#*# z_offset = -0.650
#*#
#*# [scanner]
#*# mode = touch
#*# scanner_touch_threshold = 3000
#*# scanner_touch_speed = 2
#*# scanner_touch_z_offset = 0.110
#*#
#*# [scanner model default]
#*# model_coef = 1.2745540774270008,
#*# 	1.6928926710257473,
#*# 	0.7535575880262202,
#*# 	0.3361212276001207,
#*# 	0.4063508705617015,
#*# 	0.5547365693901004,
#*# 	-0.19989988165269662,
#*# 	-0.4735261784499867,
#*# 	0.3149320526842817,
#*# 	0.34020845649737863
#*# model_domain = 3.0629859842080987e-07,3.3225570855191336e-07
#*# model_range = 0.100000,5.000000
#*# model_temp = 25.044685
#*# model_offset = 0.00000
#*# model_mode = touch
#*# model_fw_version = CARTOGRAPHER 5.1.0
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  0.180999, 0.165823, 0.153982, 0.144729, 0.127993, 0.113273, 0.097997, 0.079768, 0.066762, 0.054628, 0.037691, 0.025120, 0.017475, 0.002610, -0.005986, -0.019724, -0.031987, -0.044347, -0.053037, -0.068899, -0.077857, -0.085010, -0.093895, -0.097465, -0.102327, -0.113234, -0.118894, -0.125582, -0.141997, -0.134666
#*# 	  0.178669, 0.165922, 0.155318, 0.145214, 0.132005, 0.115340, 0.099104, 0.082665, 0.069138, 0.055048, 0.040961, 0.027219, 0.016141, 0.003014, -0.006019, -0.020932, -0.033448, -0.043334, -0.053283, -0.065655, -0.076890, -0.084808, -0.089042, -0.095752, -0.102781, -0.111094, -0.119869, -0.127170, -0.132712, -0.138627
#*# 	  0.179274, 0.167322, 0.157133, 0.145523, 0.132888, 0.116058, 0.097918, 0.084420, 0.068464, 0.056119, 0.041899, 0.027028, 0.015258, 0.002959, -0.008337, -0.022641, -0.032864, -0.045036, -0.053661, -0.064881, -0.077274, -0.085141, -0.089093, -0.094915, -0.101886, -0.110444, -0.120717, -0.126909, -0.131746, -0.137314
#*# 	  0.180197, 0.167634, 0.157092, 0.146438, 0.133509, 0.116953, 0.099164, 0.085929, 0.070051, 0.057561, 0.042513, 0.028953, 0.015671, 0.003602, -0.009415, -0.021964, -0.031334, -0.044676, -0.055151, -0.064616, -0.075174, -0.083521, -0.088553, -0.093462, -0.101523, -0.110308, -0.119819, -0.126565, -0.132003, -0.138321
#*# 	  0.180680, 0.167110, 0.156777, 0.146759, 0.131517, 0.116687, 0.100255, 0.084553, 0.070806, 0.057071, 0.042956, 0.027844, 0.016329, 0.002530, -0.008116, -0.020909, -0.032968, -0.044049, -0.053717, -0.065586, -0.074715, -0.082014, -0.089472, -0.093909, -0.100841, -0.111799, -0.118316, -0.125049, -0.131867, -0.136435
#*# 	  0.181218, 0.165585, 0.155888, 0.145633, 0.131792, 0.116794, 0.100537, 0.083890, 0.069962, 0.056723, 0.042191, 0.027477, 0.015425, 0.004059, -0.007125, -0.019864, -0.032381, -0.043570, -0.053622, -0.065293, -0.075178, -0.081073, -0.087638, -0.094145, -0.101240, -0.108612, -0.117981, -0.125077, -0.131046, -0.138557
#*# 	  0.179238, 0.167051, 0.155525, 0.144703, 0.132350, 0.115146, 0.097606, 0.084281, 0.068414, 0.055772, 0.040770, 0.025395, 0.014755, 0.003739, -0.007115, -0.018860, -0.030098, -0.041777, -0.052893, -0.063603, -0.074042, -0.081960, -0.086590, -0.092038, -0.099787, -0.107599, -0.116027, -0.127009, -0.133497, -0.139104
#*# 	  0.179453, 0.166537, 0.156385, 0.144666, 0.131106, 0.114615, 0.097027, 0.082921, 0.067802, 0.054470, 0.038682, 0.025608, 0.014515, 0.003249, -0.006237, -0.019920, -0.028516, -0.040101, -0.050592, -0.062254, -0.072335, -0.082688, -0.087064, -0.091521, -0.099530, -0.107603, -0.117294, -0.126220, -0.134429, -0.144957
#*# 	  0.177929, 0.165013, 0.153967, 0.142664, 0.125960, 0.109436, 0.094736, 0.079896, 0.064175, 0.051057, 0.036908, 0.023525, 0.012838, 0.002394, -0.007915, -0.018605, -0.028556, -0.039524, -0.048637, -0.062467, -0.075488, -0.084143, -0.089748, -0.095544, -0.102075, -0.110416, -0.120360, -0.130768, -0.137856, -0.145975
#*# 	  0.178529, 0.165524, 0.157670, 0.147022, 0.128439, 0.110439, 0.093008, 0.076733, 0.061637, 0.049422, 0.035507, 0.023620, 0.014074, 0.003629, -0.004619, -0.016116, -0.025485, -0.036711, -0.046744, -0.061168, -0.073802, -0.083411, -0.090361, -0.096222, -0.103964, -0.111271, -0.121069, -0.130916, -0.139596, -0.146564
#*# 	  0.178842, 0.164281, 0.150491, 0.136409, 0.126194, 0.109026, 0.089886, 0.074505, 0.059242, 0.048003, 0.032985, 0.021926, 0.011261, 0.003756, -0.003707, -0.015304, -0.021993, -0.033743, -0.046665, -0.060578, -0.073230, -0.085181, -0.091327, -0.097618, -0.106697, -0.114691, -0.123800, -0.133511, -0.139567, -0.146937
#*# 	  0.175705, 0.162518, 0.156012, 0.148180, 0.127762, 0.105238, 0.087162, 0.072293, 0.056984, 0.043675, 0.031715, 0.018508, 0.009819, 0.002112, -0.003673, -0.012496, -0.019397, -0.032573, -0.045717, -0.058227, -0.073763, -0.085522, -0.092280, -0.098763, -0.108482, -0.118622, -0.127495, -0.134321, -0.140011, -0.149121
#*# 	  0.174428, 0.159283, 0.149656, 0.137862, 0.118708, 0.102264, 0.085846, 0.071699, 0.054481, 0.042370, 0.027071, 0.014868, 0.007157, -0.000485, -0.004451, -0.011868, -0.019526, -0.031677, -0.043034, -0.059644, -0.074765, -0.086429, -0.094425, -0.102073, -0.112078, -0.121444, -0.130190, -0.136632, -0.142603, -0.148977
#*# 	  0.174366, 0.158897, 0.151683, 0.145256, 0.118862, 0.099198, 0.084724, 0.067156, 0.054138, 0.040514, 0.027552, 0.014169, 0.008360, 0.000000, -0.003916, -0.012120, -0.020649, -0.030516, -0.043453, -0.059525, -0.074658, -0.086664, -0.096165, -0.104526, -0.113000, -0.123158, -0.130788, -0.137515, -0.143648, -0.150709
#*# 	  0.173567, 0.155778, 0.143510, 0.131398, 0.116584, 0.100457, 0.082100, 0.066776, 0.051939, 0.040281, 0.025749, 0.013515, 0.005501, -0.000818, -0.006924, -0.014344, -0.022011, -0.033958, -0.046226, -0.062276, -0.077599, -0.090439, -0.098665, -0.106935, -0.116290, -0.125073, -0.133329, -0.140752, -0.145836, -0.152407
#*# 	  0.170333, 0.153664, 0.143603, 0.130055, 0.112611, 0.095605, 0.078187, 0.063219, 0.050170, 0.037403, 0.024283, 0.013277, 0.004317, -0.003801, -0.009736, -0.018666, -0.027361, -0.038419, -0.051097, -0.067059, -0.080725, -0.093691, -0.100751, -0.109220, -0.119028, -0.127400, -0.134959, -0.141904, -0.146809, -0.153272
#*# 	  0.165188, 0.148043, 0.134903, 0.124062, 0.108801, 0.091669, 0.074767, 0.062361, 0.047918, 0.035881, 0.022626, 0.010752, 0.000986, -0.007356, -0.013819, -0.023976, -0.033271, -0.044544, -0.055909, -0.071019, -0.084304, -0.095668, -0.102851, -0.112045, -0.120794, -0.129833, -0.138060, -0.144134, -0.149311, -0.155227
#*# 	  0.164413, 0.146750, 0.134548, 0.123498, 0.106006, 0.087908, 0.073693, 0.057097, 0.045927, 0.034467, 0.019099, 0.007520, -0.000247, -0.010124, -0.017708, -0.027983, -0.038090, -0.048844, -0.060071, -0.075370, -0.086405, -0.096782, -0.105235, -0.113092, -0.121524, -0.131780, -0.138625, -0.144909, -0.150623, -0.156429
#*# 	  0.163972, 0.149414, 0.134327, 0.118360, 0.103906, 0.086790, 0.068558, 0.057091, 0.045030, 0.033821, 0.018111, 0.006550, -0.003012, -0.011789, -0.019582, -0.031112, -0.040019, -0.050738, -0.062306, -0.076422, -0.087916, -0.098109, -0.104286, -0.112443, -0.121607, -0.131138, -0.139003, -0.145929, -0.151329, -0.157783
#*# 	  0.159225, 0.143412, 0.131853, 0.112000, 0.099890, 0.084779, 0.067342, 0.056301, 0.042720, 0.030349, 0.017390, 0.006373, -0.003503, -0.012089, -0.021659, -0.032445, -0.040968, -0.052858, -0.063576, -0.076439, -0.088458, -0.098800, -0.105098, -0.112590, -0.121724, -0.131528, -0.139963, -0.147163, -0.153213, -0.161107
#*# 	  0.160226, 0.146244, 0.136075, 0.119722, 0.100255, 0.082733, 0.070110, 0.057776, 0.043335, 0.032248, 0.019322, 0.006724, -0.001792, -0.010050, -0.019419, -0.030052, -0.038983, -0.050163, -0.059389, -0.072519, -0.085588, -0.095360, -0.101604, -0.108992, -0.117589, -0.128206, -0.137223, -0.145764, -0.151716, -0.160230
#*# 	  0.159171, 0.140363, 0.126153, 0.112151, 0.100217, 0.084360, 0.070420, 0.056573, 0.044179, 0.032626, 0.017780, 0.007607, -0.001287, -0.009005, -0.017351, -0.029587, -0.037230, -0.048277, -0.057054, -0.071462, -0.081605, -0.092289, -0.098766, -0.106209, -0.116002, -0.126768, -0.136724, -0.144444, -0.152488, -0.159523
#*# 	  0.158254, 0.141544, 0.128556, 0.115209, 0.100834, 0.083855, 0.068008, 0.055893, 0.043450, 0.031348, 0.018316, 0.007294, -0.000624, -0.008241, -0.016976, -0.026169, -0.035608, -0.046256, -0.056480, -0.068661, -0.079773, -0.090088, -0.096135, -0.104083, -0.114025, -0.125707, -0.136111, -0.144275, -0.152267, -0.158713
#*# 	  0.155659, 0.143131, 0.127096, 0.117125, 0.104896, 0.083519, 0.067887, 0.059097, 0.040907, 0.032733, 0.019517, 0.006654, -0.000059, -0.003973, -0.015531, -0.024651, -0.033404, -0.046052, -0.054553, -0.065919, -0.078459, -0.087421, -0.093325, -0.101756, -0.111609, -0.122935, -0.135357, -0.142464, -0.150272, -0.156799
#*# 	  0.158424, 0.143252, 0.132235, 0.120242, 0.104375, 0.086357, 0.070737, 0.058479, 0.045514, 0.035454, 0.022398, 0.012040, 0.003832, -0.003058, -0.010054, -0.021382, -0.029448, -0.040262, -0.050386, -0.062849, -0.074082, -0.083303, -0.089755, -0.097799, -0.108646, -0.120223, -0.130928, -0.137656, -0.146970, -0.154608
#*# 	  0.163341, 0.149272, 0.138572, 0.125474, 0.111342, 0.093855, 0.076835, 0.064477, 0.051517, 0.040663, 0.027442, 0.016899, 0.009547, 0.002268, -0.004489, -0.016147, -0.024820, -0.034288, -0.044337, -0.057694, -0.067774, -0.078428, -0.085633, -0.093112, -0.103584, -0.113846, -0.124761, -0.133056, -0.141217, -0.148514
#*# 	  0.172285, 0.157313, 0.145364, 0.132994, 0.119621, 0.100941, 0.083978, 0.071491, 0.059512, 0.047847, 0.034580, 0.024815, 0.015645, 0.009431, 0.000980, -0.008856, -0.015909, -0.027261, -0.038140, -0.050236, -0.062655, -0.071673, -0.077944, -0.086796, -0.096839, -0.106210, -0.117622, -0.125567, -0.132853, -0.141304
#*# 	  0.180076, 0.168584, 0.154091, 0.142862, 0.130990, 0.109911, 0.094208, 0.083063, 0.065452, 0.056158, 0.043224, 0.029724, 0.022469, 0.016755, 0.006232, -0.002335, -0.009285, -0.021335, -0.031309, -0.043736, -0.057492, -0.064927, -0.071398, -0.078949, -0.088176, -0.097726, -0.108603, -0.117565, -0.124317, -0.131556
#*# 	  0.186480, 0.171167, 0.160072, 0.149052, 0.135976, 0.115783, 0.100315, 0.086559, 0.072462, 0.061605, 0.047140, 0.035036, 0.026273, 0.017022, 0.010282, 0.000567, -0.006851, -0.016678, -0.027962, -0.041927, -0.051855, -0.060709, -0.065497, -0.073195, -0.082029, -0.091409, -0.101288, -0.109162, -0.116212, -0.123450
#*# 	  0.136119, 0.124714, 0.118821, 0.114618, 0.106672, 0.090121, 0.065621, 0.048874, 0.036518, 0.026176, 0.011306, -0.000242, -0.009754, -0.017145, -0.023498, -0.032453, -0.037467, -0.047391, -0.056088, -0.068464, -0.077211, -0.083703, -0.084845, -0.087190, -0.091592, -0.102721, -0.114465, -0.123945, -0.130165, -0.135732
#*# x_count = 30
#*# y_count = 30
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 25.0
#*# max_x = 170.0
#*# min_y = 25.0
#*# max_y = 170.0
